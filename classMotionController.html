<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RIT VEXU Core API: MotionController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">RIT VEXU Core API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classMotionController-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">MotionController Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="motion__controller_8h_source.html">motion_controller.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for MotionController:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classMotionController.png" usemap="#MotionController_map" alt=""/>
  <map id="MotionController_map" name="MotionController_map">
<area href="classFeedback.html" alt="Feedback" shape="rect" coords="0,0,106,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structMotionController_1_1m__profile__cfg__t.html">m_profile_cfg_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a076c5aa4ea383dccaeec76f7554a7467"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMotionController.html#a076c5aa4ea383dccaeec76f7554a7467">MotionController</a> (<a class="el" href="structMotionController_1_1m__profile__cfg__t.html">m_profile_cfg_t</a> &amp;config)</td></tr>
<tr class="memdesc:a076c5aa4ea383dccaeec76f7554a7467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new Motion Controller object.  <br /></td></tr>
<tr class="separator:a076c5aa4ea383dccaeec76f7554a7467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d665d9916111cbce677da6df6b6667"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMotionController.html#af0d665d9916111cbce677da6df6b6667">init</a> (double start_pt, double end_pt) override</td></tr>
<tr class="memdesc:af0d665d9916111cbce677da6df6b6667"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the motion profile for a new movement This will also reset the <a class="el" href="classPID.html">PID</a> and profile timers.  <br /></td></tr>
<tr class="separator:af0d665d9916111cbce677da6df6b6667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86ef0ef19858b5b407f7406bb5da30af"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMotionController.html#a86ef0ef19858b5b407f7406bb5da30af">update</a> (double sensor_val) override</td></tr>
<tr class="memdesc:a86ef0ef19858b5b407f7406bb5da30af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the motion profile with a new sensor value.  <br /></td></tr>
<tr class="separator:a86ef0ef19858b5b407f7406bb5da30af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a1944f590618cd91770364aea416cd5"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMotionController.html#a2a1944f590618cd91770364aea416cd5">get</a> () override</td></tr>
<tr class="separator:a2a1944f590618cd91770364aea416cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a944c245002a1eb124dd8df40de4fcc57"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMotionController.html#a944c245002a1eb124dd8df40de4fcc57">set_limits</a> (double lower, double upper) override</td></tr>
<tr class="separator:a944c245002a1eb124dd8df40de4fcc57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9e2af88b848646889deb1d43a283173"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMotionController.html#aa9e2af88b848646889deb1d43a283173">is_on_target</a> () override</td></tr>
<tr class="separator:aa9e2af88b848646889deb1d43a283173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab958ce97fbc4929f4dd03965671e8d4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmotion__t.html">motion_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMotionController.html#ab958ce97fbc4929f4dd03965671e8d4d">get_motion</a> ()</td></tr>
<tr class="separator:ab958ce97fbc4929f4dd03965671e8d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classFeedback"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classFeedback')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classFeedback.html">Feedback</a></td></tr>
<tr class="memitem:a22efb13216bfd51aea07e0b6e45135c1 inherit pub_methods_classFeedback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFeedback.html#a22efb13216bfd51aea07e0b6e45135c1">init</a> (double start_pt, double set_pt)=0</td></tr>
<tr class="separator:a22efb13216bfd51aea07e0b6e45135c1 inherit pub_methods_classFeedback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adda5fc7642539996be00632954dfc41f inherit pub_methods_classFeedback"><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFeedback.html#adda5fc7642539996be00632954dfc41f">update</a> (double val)=0</td></tr>
<tr class="separator:adda5fc7642539996be00632954dfc41f inherit pub_methods_classFeedback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac44bb519a6f4e25c8e8250f3d30ab359 inherit pub_methods_classFeedback"><td class="memItemLeft" align="right" valign="top">virtual double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFeedback.html#ac44bb519a6f4e25c8e8250f3d30ab359">get</a> ()=0</td></tr>
<tr class="separator:ac44bb519a6f4e25c8e8250f3d30ab359 inherit pub_methods_classFeedback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a533a10b65cfc998898bf054f8b141de2 inherit pub_methods_classFeedback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFeedback.html#a533a10b65cfc998898bf054f8b141de2">set_limits</a> (double lower, double upper)=0</td></tr>
<tr class="separator:a533a10b65cfc998898bf054f8b141de2 inherit pub_methods_classFeedback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4cc835c374aab9761d22603d4329d34 inherit pub_methods_classFeedback"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classFeedback.html#ae4cc835c374aab9761d22603d4329d34">is_on_target</a> ()=0</td></tr>
<tr class="separator:ae4cc835c374aab9761d22603d4329d34 inherit pub_methods_classFeedback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef8981678b7bcded915ccc7e3e237208 inherit pub_methods_classFeedback"><td class="memItemLeft" align="right" valign="top"><a id="aef8981678b7bcded915ccc7e3e237208" name="aef8981678b7bcded915ccc7e3e237208"></a>
virtual Feedback::FeedbackType&#160;</td><td class="memItemRight" valign="bottom"><b>get_type</b> ()</td></tr>
<tr class="separator:aef8981678b7bcded915ccc7e3e237208 inherit pub_methods_classFeedback"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a20749b6a4bd3cf509a3acf682831eb00"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structFeedForward_1_1ff__config__t.html">FeedForward::ff_config_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMotionController.html#a20749b6a4bd3cf509a3acf682831eb00">tune_feedforward</a> (<a class="el" href="classTankDrive.html">TankDrive</a> &amp;drive, <a class="el" href="classOdometryTank.html">OdometryTank</a> &amp;odometry, double pct=0.6, double duration=2)</td></tr>
<tr class="separator:a20749b6a4bd3cf509a3acf682831eb00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_types_classFeedback"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classFeedback')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classFeedback.html">Feedback</a></td></tr>
<tr class="memitem:ac82a001abba300290790eb8414a84dce inherit pub_types_classFeedback"><td class="memItemLeft" align="right" valign="top"><a id="ac82a001abba300290790eb8414a84dce" name="ac82a001abba300290790eb8414a84dce"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>FeedbackType</b> { <b>PIDType</b>
, <b>FeedforwardType</b>
, <b>OtherType</b>
 }</td></tr>
<tr class="separator:ac82a001abba300290790eb8414a84dce inherit pub_types_classFeedback"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Motion Controller class</p>
<p>This class defines a top-level motion profile, which can act as an intermediate between a subsystem class and the motors themselves</p>
<p>This takes the constants kS, kV, kA, kP, kI, kD, max_v and acceleration and wraps around a feedforward, <a class="el" href="classPID.html">PID</a> and trapezoid profile. It does so with the following formula:</p>
<p>out = feedfoward.calculate(motion_profile.get(time_s)) + pid.get(motion_profile.get(time_s))</p>
<p>For <a class="el" href="classPID.html">PID</a> and Feedforward specific formulae, see <a class="el" href="pid_8h_source.html">pid.h</a>, <a class="el" href="feedforward_8h_source.html">feedforward.h</a>, and <a class="el" href="trapezoid__profile_8h_source.html">trapezoid_profile.h</a></p>
<dl class="section author"><dt>Author</dt><dd>Ryan McGee </dd></dl>
<dl class="section date"><dt>Date</dt><dd>7/13/2022 </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a076c5aa4ea383dccaeec76f7554a7467" name="a076c5aa4ea383dccaeec76f7554a7467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a076c5aa4ea383dccaeec76f7554a7467">&#9670;&#160;</a></span>MotionController()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MotionController::MotionController </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMotionController_1_1m__profile__cfg__t.html">m_profile_cfg_t</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new Motion Controller object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>The definition of how the robot is able to move max_v Maximum velocity the movement is capable of accel Acceleration / deceleration of the movement pid_cfg Definitions of kP, kI, and kD ff_cfg Definitions of kS, kV, and kA</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">config</td><td>The definition of how the robot is able to move max_v Maximum velocity the movement is capable of accel Acceleration / deceleration of the movement pid_cfg Definitions of kP, kI, and kD ff_cfg Definitions of kS, kV, and kA </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a2a1944f590618cd91770364aea416cd5" name="a2a1944f590618cd91770364aea416cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a1944f590618cd91770364aea416cd5">&#9670;&#160;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double MotionController::get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>the last saved result from the feedback controller </dd></dl>

<p>Implements <a class="el" href="classFeedback.html#ac44bb519a6f4e25c8e8250f3d30ab359">Feedback</a>.</p>

</div>
</div>
<a id="ab958ce97fbc4929f4dd03965671e8d4d" name="ab958ce97fbc4929f4dd03965671e8d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab958ce97fbc4929f4dd03965671e8d4d">&#9670;&#160;</a></span>get_motion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmotion__t.html">motion_t</a> MotionController::get_motion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>The current postion, velocity and acceleration setpoints </dd></dl>

</div>
</div>
<a id="af0d665d9916111cbce677da6df6b6667" name="af0d665d9916111cbce677da6df6b6667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0d665d9916111cbce677da6df6b6667">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MotionController::init </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>start_pt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>end_pt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the motion profile for a new movement This will also reset the <a class="el" href="classPID.html">PID</a> and profile timers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start_pt</td><td>Movement starting position </td></tr>
    <tr><td class="paramname">end_pt</td><td>Movement ending posiiton </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classFeedback.html#a22efb13216bfd51aea07e0b6e45135c1">Feedback</a>.</p>

</div>
</div>
<a id="aa9e2af88b848646889deb1d43a283173" name="aa9e2af88b848646889deb1d43a283173"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9e2af88b848646889deb1d43a283173">&#9670;&#160;</a></span>is_on_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MotionController::is_on_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>Whether or not the movement has finished, and the <a class="el" href="classPID.html">PID</a> confirms it is on target </dd></dl>

<p>Implements <a class="el" href="classFeedback.html#ae4cc835c374aab9761d22603d4329d34">Feedback</a>.</p>

</div>
</div>
<a id="a944c245002a1eb124dd8df40de4fcc57" name="a944c245002a1eb124dd8df40de4fcc57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a944c245002a1eb124dd8df40de4fcc57">&#9670;&#160;</a></span>set_limits()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MotionController::set_limits </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>lower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>upper</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Clamp the upper and lower limits of the output. If both are 0, no limits should be applied. if limits are applied, the controller will not target any value below lower or above upper</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lower</td><td>upper limit </td></tr>
    <tr><td class="paramname">upper</td><td>lower limiet</td></tr>
  </table>
  </dd>
</dl>
<p>Clamp the upper and lower limits of the output. If both are 0, no limits should be applied.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lower</td><td>Upper limit </td></tr>
    <tr><td class="paramname">upper</td><td>Lower limit </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classFeedback.html#a533a10b65cfc998898bf054f8b141de2">Feedback</a>.</p>

</div>
</div>
<a id="a20749b6a4bd3cf509a3acf682831eb00" name="a20749b6a4bd3cf509a3acf682831eb00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20749b6a4bd3cf509a3acf682831eb00">&#9670;&#160;</a></span>tune_feedforward()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structFeedForward_1_1ff__config__t.html">FeedForward::ff_config_t</a> MotionController::tune_feedforward </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classTankDrive.html">TankDrive</a> &amp;&#160;</td>
          <td class="paramname"><em>drive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classOdometryTank.html">OdometryTank</a> &amp;&#160;</td>
          <td class="paramname"><em>odometry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>pct</em> = <code>0.6</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>duration</em> = <code>2</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This method attempts to characterize the robot's drivetrain and automatically tune the feedforward. It does this by first calculating the kS (voltage to overcome static friction) by slowly increasing the voltage until it moves.</p>
<p>Next is kV (voltage to sustain a certain velocity), where the robot will record it's steady-state velocity at 'pct' speed.</p>
<p>Finally, kA (voltage needed to accelerate by a certain rate), where the robot will record the entire movement's velocity and acceleration, record a plot of [X=(pct-kV*V-kS), Y=(Acceleration)] along the movement, and since kA*Accel = pct-kV*V-kS, the reciprocal of the linear regression is the kA value.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">drive</td><td>The tankdrive to operate on </td></tr>
    <tr><td class="paramname">odometry</td><td>The robot's odometry subsystem </td></tr>
    <tr><td class="paramname">pct</td><td>Maximum velocity in percent (0-&gt;1.0) </td></tr>
    <tr><td class="paramname">duration</td><td>Amount of time the robot should be moving for the test </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A tuned feedforward object </dd></dl>

</div>
</div>
<a id="a86ef0ef19858b5b407f7406bb5da30af" name="a86ef0ef19858b5b407f7406bb5da30af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86ef0ef19858b5b407f7406bb5da30af">&#9670;&#160;</a></span>update()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double MotionController::update </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>sensor_val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the motion profile with a new sensor value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_val</td><td>Value from the sensor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the motor input generated from the motion profile</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sensor_val</td><td>Value from the sensor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the motor input generated from the motion profile </dd></dl>

<p>Implements <a class="el" href="classFeedback.html#adda5fc7642539996be00632954dfc41f">Feedback</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/utils/<a class="el" href="motion__controller_8h_source.html">motion_controller.h</a></li>
<li>src/utils/motion_controller.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
